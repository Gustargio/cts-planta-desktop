<!doctype html>
<html lang="es">
<head>
  <meta charset="utf-8" />
  <title>Control Total Sola — Modo PLANTA</title>
  <meta http-equiv="Content-Security-Policy"
        content="default-src 'self' https://www.gstatic.com https://www.googleapis.com;
                 script-src 'self' https://www.gstatic.com 'unsafe-inline';
                 style-src 'self' 'unsafe-inline';
                 img-src 'self' data:;
                 media-src 'self' data:;">
  <!-- Firebase (compat) -->
  <script src="https://www.gstatic.com/firebasejs/10.12.1/firebase-app-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/10.12.1/firebase-database-compat.js"></script>
  <style>
    body { font-family: system-ui, Arial, sans-serif; margin:0; background:#f6f7fb; color:#222; }
    header { display:flex; align-items:center; gap:12px; padding:12px 16px; background:#fff; border-bottom:1px solid #e7e7e7; }
    header img { width:36px; height:36px; }
    header h1 { font-size:18px; margin:0; }

    .wrap { padding:16px; max-width:1100px; margin:0 auto; }
    .banners { display:grid; grid-template-columns: repeat(2, minmax(280px, 1fr)); gap:10px; margin-bottom:16px; }
    .banner { color:#fff; padding:14px 16px; border-radius:10px; cursor:pointer; user-select:none; }
    .b-planta { background:#388E3C; }
    .b-saliendo { background:#FB8C00; }
    .b-obra { background:#1E88E5; }
    .b-descarga { background:#8E24AA; }

    .list { background:#fff; border-radius:10px; padding:8px; border:1px solid #ececec; }
    .item { display:flex; align-items:center; gap:12px; padding:10px 8px; border-bottom:1px dashed #eee; }
    .item:last-child { border-bottom:none; }
    .dot { width:12px; height:12px; border-radius:50%; display:inline-block; }
    .d-planta { background:#388E3C; }
    .d-saliendo { background:#FB8C00; }
    .d-obra { background:#1E88E5; }
    .d-descarga { background:#8E24AA; }
    .item .muted { color:#666; font-size:12px; }

    .ack { margin-left:auto; border:none; padding:8px 10px; border-radius:8px; color:#fff; background:#673AB7; cursor:pointer; }
    .ack:hover { filter:brightness(1.05); }

    /* Toast interno */
    .toast {
      position: fixed; right: 20px; bottom: 20px;
      background: #512DA8; color: #fff; border-radius: 10px;
      padding: 12px 14px; box-shadow: 0 8px 30px rgba(0,0,0,.2);
      display: none; align-items: center; gap: 10px; z-index: 9999;
      max-width: 420px;
    }
    .toast .title { font-weight: 600; }
    .toast .btn { margin-left:auto; background:#00C853; color:#fff; border:none; padding:8px 10px; border-radius:8px; cursor:pointer; }
    .toast .close { background:transparent; color:#fff; border:1px solid rgba(255,255,255,.5); padding:6px 8px; border-radius:8px; cursor:pointer; }
  </style>
</head>
<body>
  <header>
    <img src="../../icon.png" onerror="this.style.display='none'"/>
    <h1>Modo PLANTA</h1>
  </header>

  <div class="wrap">
    <div class="banners">
      <div id="sumPlanta"   class="banner b-planta">En Planta: 0</div>
      <div id="sumSaliendo" class="banner b-saliendo">Saliendo: 0</div>
      <div id="sumObra"     class="banner b-obra">En Obra: 0</div>
      <div id="sumDescarga" class="banner b-descarga">Descarga: 0</div>
    </div>

    <div class="list" id="list"></div>
  </div>

  <!-- Toast interno -->
  <div id="toast" class="toast">
    <div>
      <div class="title" id="toastTitle">Cambio de estado</div>
      <div class="body" id="toastBody">Mixer X → Estado</div>
    </div>
    <button id="toastOk" class="btn">Dar OK</button>
    <button id="toastClose" class="close">Cerrar</button>
  </div>

  <script src="renderer.js"></script>
</body>
</html>
